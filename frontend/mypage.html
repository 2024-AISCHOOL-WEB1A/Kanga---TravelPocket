<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마이페이지</title>
    <script>
        async function updateUser() {
            const user_id = document.getElementById('user_id').value;
            const user_pw = document.getElementById('user_pw').value;
            const new_nick = document.getElementById('new_nick').value;
            const new_email = document.getElementById('new_email').value;

            try {
                const response = await fetch('/user/update', { // 상대 경로로 수정
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ user_id, user_pw, new_nick, new_email }),
                });

                const result = await response.json();
                
                if (response.ok) {
                    alert(result.message || '유저 정보 수정 성공');
                } else {
                    alert('유저 정보 수정 중 오류: ' + (result.message || result));
                }
            } catch (error) {
                console.error('유저 정보 수정 중 오류:', error);
                alert('유저 정보 수정 중 오류: ' + error.message);
            }
        }

        async function deleteUser() {
            const user_id = document.getElementById('user_id').value;
            const user_pw = document.getElementById('user_pw').value;

            try {
                const response = await fetch('/user/delete', { // 상대 경로로 수정
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ user_id, user_pw }),
                });

                const result = await response.json();
                
                if (response.ok) {
                    alert(result.message || '회원 탈퇴 성공');
                } else {
                    alert('회원 탈퇴 중 오류: ' + (result.message || result));
                }
            } catch (error) {
                console.error('회원 탈퇴 중 오류:', error);
                alert('회원 탈퇴 중 오류: ' + error.message);
            }
        }
    </script>
</head>
<body>
    <h1>My Page</h1>
    <div>
        <label for="user_id">User ID:</label>
        <input type="text" id="user_id">
    </div>
    <div>
        <label for="user_pw">Password:</label>
        <input type="password" id="user_pw">
    </div>
    <div>
        <label for="new_nick">New Nickname:</label>
        <input type="text" id="new_nick">
    </div>
    <div>
        <label for="new_email">New Email:</label>
        <input type="text" id="new_email">
    </div>
    <button onclick="updateUser()">Update User</button>
    <button onclick="deleteUser()">Delete User</button>
</body>
</html>
